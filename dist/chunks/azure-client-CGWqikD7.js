var k=Object.defineProperty;var x=(o,e,t)=>e in o?k(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var r=(o,e,t)=>x(o,typeof e!="symbol"?e+"":e,t);class N{constructor(e){r(this,"endpoint");r(this,"apiKey");r(this,"deploymentName");r(this,"apiVersion");this.endpoint=e.endpoint.replace(/\/$/,""),this.apiKey=e.apiKey,this.deploymentName=e.deploymentName,this.apiVersion=e.apiVersion}getUrl(){return`${this.endpoint}/openai/deployments/${this.deploymentName}/chat/completions?api-version=${this.apiVersion}`}async chat(e,t={}){var s,a;const n=await fetch(this.getUrl(),{method:"POST",headers:{"Content-Type":"application/json","api-key":this.apiKey},body:JSON.stringify({messages:e,temperature:t.temperature??.7,max_tokens:t.max_tokens??4096,stream:!1})});if(!n.ok){const i=await n.text();throw new Error(`Azure OpenAI Error: ${n.status} - ${i}`)}return((a=(s=(await n.json()).choices[0])==null?void 0:s.message)==null?void 0:a.content)??""}async*chatStream(e,t={}){var i,d,h,l;const n=await fetch(this.getUrl(),{method:"POST",headers:{"Content-Type":"application/json","api-key":this.apiKey},body:JSON.stringify({messages:e,temperature:t.temperature??.7,max_tokens:t.max_tokens??4096,stream:!0})});if(!n.ok){const m=await n.text();throw new Error(`Azure OpenAI Error: ${n.status} - ${m}`)}const c=(i=n.body)==null?void 0:i.getReader();if(!c)throw new Error("No response body");const s=new TextDecoder;let a="";for(;;){const{done:m,value:w}=await c.read();if(m)break;a+=s.decode(w,{stream:!0});const y=a.split(`
`);a=y.pop()||"";for(const f of y){const p=f.trim();if(!(!p||p==="data: [DONE]")&&p.startsWith("data: "))try{const u=(l=(h=(d=JSON.parse(p.slice(6)).choices)==null?void 0:d[0])==null?void 0:h.delta)==null?void 0:l.content;u&&(yield u)}catch{}}}}}const g={"o3-mini":{name:"o3-mini",description:"نموذج التفكير المتقدم - للمهام المعقدة",maxTokens:8192},"gpt-4.1":{name:"gpt-4.1",description:"أحدث إصدار من GPT-4 - متوازن",maxTokens:128e3},"gpt-4o":{name:"gpt-4o",description:"GPT-4 Omni - سريع ومتعدد الوسائط",maxTokens:128e3}};export{N as A,g as a};
