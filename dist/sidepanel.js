import{c as d,r as l,j as e,S as b,a as w,R as k}from"./chunks/sparkles-BpGDIk50.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=d("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=d("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=d("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=d("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=d("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=d("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),A=()=>{const[c,n]=l.useState([]),[o,r]=l.useState(""),[i,h]=l.useState(!1),[m,g]=l.useState(null),[x,f]=l.useState(!1),p=l.useRef(null);l.useEffect(()=>{chrome.runtime.sendMessage({type:"GET_SETTINGS"},t=>{var s;(s=t==null?void 0:t.data)!=null&&s.apiKey&&f(!0)}),chrome.tabs.query({active:!0,currentWindow:!0},async t=>{var s;if((s=t[0])!=null&&s.id){const a=await chrome.tabs.sendMessage(t[0].id,{type:"GET_PAGE_CONTENT"});a&&!a.error&&g(a)}})},[]),l.useEffect(()=>{var t;(t=p.current)==null||t.scrollIntoView({behavior:"smooth"})},[c]);const y=async()=>{if(!o.trim()||i)return;const t={id:Date.now().toString(),role:"user",content:o.trim(),timestamp:Date.now()};n(s=>[...s,t]),r(""),h(!0);try{const s=await chrome.runtime.sendMessage({type:"CHAT",payload:{messages:[...c,t].map(a=>({role:a.role,content:a.content})),context:m}});if(s.success){const a={id:(Date.now()+1).toString(),role:"assistant",content:s.data,timestamp:Date.now()};n(v=>[...v,a])}else n(a=>[...a,{id:(Date.now()+1).toString(),role:"assistant",content:`âŒ Ø®Ø·Ø£: ${s.error}`,timestamp:Date.now()}])}catch(s){n(a=>[...a,{id:(Date.now()+1).toString(),role:"assistant",content:`âŒ Ø®Ø·Ø£: ${s.message}`,timestamp:Date.now()}])}finally{h(!1)}},N=()=>{n([])},j=()=>{chrome.runtime.openOptionsPage()};return e.jsxs("div",{className:"h-screen flex flex-col bg-comet-bg",children:[e.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-comet-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-6 h-6 text-comet-accent"}),e.jsx("h1",{className:"text-lg font-bold text-gradient",children:"Comet-X"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:N,className:"p-2 hover:bg-comet-surface rounded-lg transition-colors",title:"Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©",children:e.jsx(T,{className:"w-4 h-4 text-comet-muted"})}),e.jsx("button",{onClick:j,className:"p-2 hover:bg-comet-surface rounded-lg transition-colors",title:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",children:e.jsx(E,{className:"w-4 h-4 text-comet-muted"})})]})]}),m&&e.jsx("div",{className:"px-4 py-2 bg-comet-surface/50 border-b border-comet-border",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-comet-muted",children:[e.jsx(M,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:m.title||m.url})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!x&&e.jsxs("div",{className:"comet-card text-center",children:[e.jsx("p",{className:"text-comet-muted mb-2",children:"ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ Azure OpenAI ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"}),e.jsx("button",{onClick:j,className:"comet-button text-sm",children:"ÙØªØ­ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"})]}),c.length===0&&x&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(b,{className:"w-12 h-12 text-comet-accent mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-comet-muted",children:"Ù…Ø±Ø­Ø¨Ø§Ù‹! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ"}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(u,{icon:"ðŸ“",text:"Ù„Ø®Øµ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©",onClick:()=>r("Ù„Ø®Øµ Ù…Ø­ØªÙˆÙ‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©")}),e.jsx(u,{icon:"ðŸ’¡",text:"Ø§Ø´Ø±Ø­ Ø§Ù„Ù…Ø­ØªÙˆÙ‰",onClick:()=>r("Ø§Ø´Ø±Ø­ Ù„ÙŠ Ù…Ø­ØªÙˆÙ‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ø¨Ø´ÙƒÙ„ Ù…Ø¨Ø³Ø·")}),e.jsx(u,{icon:"ðŸ”",text:"Ø§Ø³ØªØ®Ø±Ø¬ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª",onClick:()=>r("Ø§Ø³ØªØ®Ø±Ø¬ Ø£Ù‡Ù… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©")})]})]}),c.map(t=>e.jsx(I,{message:t},t.id)),i&&e.jsxs("div",{className:"flex items-center gap-2 text-comet-muted",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-comet-accent rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-comet-accent rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-comet-accent rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"text-sm",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ±..."})]}),e.jsx("div",{ref:p})]}),e.jsx("div",{className:"p-4 border-t border-comet-border",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:t=>r(t.target.value),onKeyDown:t=>t.key==="Enter"&&y(),placeholder:"Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...",className:"comet-input flex-1",disabled:!x||i}),e.jsx("button",{onClick:y,disabled:!o.trim()||i||!x,className:"comet-button px-4",children:e.jsx(D,{className:"w-4 h-4"})})]})})]})},u=({icon:c,text:n,onClick:o})=>e.jsxs("button",{onClick:o,className:"w-full text-right px-4 py-2 bg-comet-surface hover:bg-comet-border/50 rounded-lg transition-colors text-sm",children:[e.jsx("span",{className:"ml-2",children:c}),n]}),I=({message:c})=>{const[n,o]=l.useState(!1),r=c.role==="user",i=async()=>{await navigator.clipboard.writeText(c.content),o(!0),setTimeout(()=>o(!1),2e3)};return e.jsx("div",{className:`flex ${r?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-2 ${r?"bg-comet-accent text-white rounded-br-md":"bg-comet-surface border border-comet-border rounded-bl-md"}`,children:[e.jsx("div",{className:"whitespace-pre-wrap text-sm",children:c.content}),!r&&e.jsx("div",{className:"flex justify-end mt-1",children:e.jsx("button",{onClick:i,className:"p-1 hover:bg-comet-border/50 rounded transition-colors",title:"Ù†Ø³Ø®",children:n?e.jsx(C,{className:"w-3 h-3 text-comet-success"}):e.jsx(S,{className:"w-3 h-3 text-comet-muted"})})})]})})};w.createRoot(document.getElementById("root")).render(e.jsx(k.StrictMode,{children:e.jsx(A,{})}));
